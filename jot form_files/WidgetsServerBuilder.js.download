function getIframeWindow(a){var b;return a.contentWindow?a.contentWindow:a.window?a.window:(!b&&a.contentDocument&&(b=a.contentDocument),!b&&a.document&&(b=a.document),b&&b.defaultView?b.defaultView:b&&b.parentWindow?b.parentWindow:void 0)}function getStyle(a,b){var c,d=(a.ownerDocument||document).defaultView;return d&&d.getComputedStyle?(b=b.replace(/([A-Z])/g,"-$1").toLowerCase(),d.getComputedStyle(a,null).getPropertyValue(b)):a.currentStyle?(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b],/^\d+(em|pt|%|ex)?$/i.test(c)?function(b){var c=a.style.left,d=a.runtimeStyle.left;return a.runtimeStyle.left=a.currentStyle.left,a.style.left=b||0,b=a.style.pixelLeft+"px",a.style.left=c,a.runtimeStyle.left=d,b}(c):c):void 0}function widgetFrameLoaded(a,b){function c(a){try{JSON.parse(a)}catch(b){return!1}return!0}function d(a,b){try{-1!=navigator.userAgent.indexOf("Firefox")?XD.postMessage(a,l,getIframeWindow(window.frames["customFieldFrame_"+b])):XD.postMessage(a,l,window.frames["customFieldFrame_"+b])}catch(c){console.log(c)}}function e(){var b=document.getElementById("widget_settings_"+a);return b?b.value:null}function f(){var b=document.getElementById("id_"+a).className;return!!~b.indexOf("jf-required")||!!~b.indexOf("isRequired")}function g(){var b=document.getElementById("label_"+a);return b?b.className.indexOf("form-label")>-1:!1}b="undefined"==typeof b?{}:b;var h=!1;h&&console.log("SERVER: widget frame onload for",a);var i=document.getElementById("customFieldFrame_"+a),j=i.src;if(!j.match("/form/")){var k=j.match(/^(ftp:\/\/|https?:\/\/)?(.+@)?([a-zA-Z0-9\.\-]+).*$/),l=k[1]+k[3];XD.receiveMessage(function(a){if(c(a.data)){var d=JSON.parse(a.data);if(h&&console.log("SERVER: message coming form client type ",d.type),"submit"===d.type){"number"==typeof d.value&&(d.value=d.value+"");var e=$(document.getElementById("input_"+d.qid)).hasClassName("widget-required");if(e?d.valid===!1?JotForm.errored(document.getElementById("input_"+d.qid),"Please fill this field"):(JotForm.corrected(document.getElementById("input_"+d.qid)),document.getElementById("input_"+d.qid).value=void 0!==d.value?d.value:""):document.getElementById("input_"+d.qid).value=d.valid===!1?"widget not used":void 0!==d.value?d.value:"","undefined"==typeof d.value||0==d.value){var f=document.getElementById("input_"+d.qid);f.value="",f.removeAttribute("name")}for(var g=document.getElementsByClassName("widget-required"),i=!0,j=-0;j<g.length;j++)0===g[j].value.length&&(i=!1)}if("data"===d.type&&(document.getElementById("input_"+d.qid).value=d.value),"size"===d.type){var k=d.width,l=d.height;h&&console.log("SERVER: resizing widget width",k,"height",l),void 0!==k&&null!==k&&(document.getElementById("customFieldFrame_"+d.qid)?document.getElementById("customFieldFrame_"+d.qid).style.width=k+"px":null),void 0!==l&&null!==l&&(document.getElementById("customFieldFrame_"+d.qid)?document.getElementById("customFieldFrame_"+d.qid).style.height=l+"px":null)}if("translation"===d.type&&d.data.length>0){var m=window.widgetTranslatables[b.formID];"undefined"==typeof m&&(m={}),m["qid_"+d.qid]=d.data,window.widgetTranslatables[b.formID]=m;try{localStorage.setItem("wStorage",JSON.stringify(window.widgetTranslatables))}catch(n){console.log(n)}}}},document.location.protocol+"//"+i.src.match(/^(ftp:\/\/|https?:\/\/)?(.+@)?([a-zA-Z0-9\.\-]+).*$/)[3]);var m="cardform"==window.FORM_MODE||"card"===window.buildermode,n=window&&window.newDefaultTheme||"",o="function"==typeof getAllProperties?getAllProperties().form_background:"#fff",p="function"==typeof getAllProperties?getAllProperties().form_font:"",q={type:"ready",qid:a+"",background:b.formBackground||o,fontFamily:b.formFont||p,formID:b.formID||BuildSource.formID,cardform:m,jotformNext:window.location.href.indexOf("jotformNext=1")>-1||1==window.isComingFromJotFormNext,onWizard:!0,settings:e(),required:f(),origin:window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),themeVersion:n,isWidgetLabelEnabled:g()},r=i.readAttribute("data-width")||i.style.width,s=i.readAttribute("data-height")||i.style.height;if(q.width=parseInt(r),q.height=parseInt(s),m&&i&&"function"==typeof i.up){var t=i.up(".jfField")||!1,u=t&&"function"==typeof t.getAttribute?t.getAttribute("data-widget-id"):!1;u&&(q.widgetID=u)}d(JSON.stringify(q),a+"");var v={type:"translatable",formID:b.formID||BuildSource.formID,qid:a+""};d(JSON.stringify(v),a+"")}}function getWidgetTranslatables(a,b){var c={isTranslatable:!1,data:[]};if("undefined"!=typeof a&&"undefined"!=typeof b&&!isNaN(a)&&!isNaN(b)&&""!==a&&""!==b){var d=localStorage.getItem("wStorage");if(void 0!==d&&null!==d){var d=JSON.parse(d);if("undefined"!=typeof d[a]){var d=d[a];if("undefined"!=typeof d["qid_"+b]){var e=d["qid_"+b];"undefined"!=typeof e&&e.length>0&&(c.isTranslatable=!0,c.data=e)}}}}return c}if("object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),void 0===window.getIframeWindow,"undefined"==typeof XD)var XD=function(){var a,b,c,d=1,e=this;return{postMessage:function(a,b,c){if(b)if(c=c||parent,e.postMessage){var f=b.replace(/([^:]+:\/\/[^\/]+).*/,"$1");if("postMessage"in c||(c=getIframeWindow(c)),!c)return;0===f.indexOf("file://")&&(f="*"),c.postMessage(a,f)}else b&&(c.location=b.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+a)},receiveMessage:function(d,f){e.postMessage?(d&&(c=function(a){var b=e.location.search.split("?").join(""),c=b.indexOf("offline_forms=true")>-1||b.indexOf("offline_forms=si")>-1;return!c&&("string"==typeof f&&a.origin!==f||"[object Function]"===Object.prototype.toString.call(f)&&f(a.origin)===!1)?!1:(d(a),void 0)}),e.addEventListener?e[d?"addEventListener":"removeEventListener"]("message",c,!1):e[d?"attachEvent":"detachEvent"]("onmessage",c)):(a&&clearInterval(a),a=null,d&&(a=setInterval(function(){var a=document.location.hash,c=/^#?\d+&/;a!==b&&c.test(a)&&(b=a,d({data:a.replace(c,"")}))},100)))}}}();window.console||(console={log:function(){}}),void 0===window.getStyle,void 0===window.JCFServerCommon&&(window.JCFServerCommon={frames:{}}),void 0===window.widgetTranslatables&&(window.widgetTranslatables={});